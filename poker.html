<!DOCTYPE html>
<html>
<head>
<title>Poker Room â€” The Ivory Ledger</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="center">

<h1>Poker Table</h1>

<div id="dealer" class="paybox">
Dealer: Valentina
</div>

<div id="table">

<div class="seat you">You</div>
<div class="seat empty" id="s1">Empty</div>
<div class="seat empty" id="s2">Empty</div>
<div class="seat empty" id="s3">Empty</div>

</div>

  <div id="timer">Waiting for players: 120</div>

<br>

<button onclick="startHand()">Play Hand</button>

<button class="ghostBtn" onclick="location.href='casino.html'">Return</button>

<script>
let countdown=120;
let selected=parseFloat(localStorage.getItem("pokerBuyIn")||100);

function fillAI(){
 document.querySelectorAll(".empty").forEach(e=>{
   if(Math.random()>.4){
     e.innerHTML="AI Player";
     e.classList.remove("empty");
   }
 });
}

  let t=setInterval(()=>{
 countdown--;
 document.getElementById("timer").innerHTML="Waiting for players: "+countdown;

 if(countdown%20===0) fillAI();

 if(countdown<=0){
   clearInterval(t);
   fillAI();
   document.getElementById("timer").innerHTML="Table Ready";
 }
},1000);

function startHand(){
 let bal=parseFloat(localStorage.getItem("balance")||0);
 if(bal<selected){
   alert("Insufficient balance");
   return;
 }

 bal-=selected;

 let win=Math.random()>.5;

  if(win){
   let payout=(selected*(Math.random()*2+.5)).toFixed(2);
   bal=parseFloat(bal)+parseFloat(payout);
   localStorage.setItem("balance",bal.toFixed(2));
   showResult("WIN","+$"+payout);
 }else{
   localStorage.setItem("balance",bal.toFixed(2));
   showResult("LOSS","-"+selected);
 }
}

function showResult(title,amount){
 document.body.innerHTML=`
 <div class="center">
   <h1>${title}</h1>
   <h2>${amount}</h2>
   <p>Dealer Valentina thanks you.</p>
   <button onclick="location.href='members.html'">Return to Members</button>
 </div>
 `;
}
</script>

  </div>

<style>
#table{
 display:grid;
 grid-template-columns:repeat(2,1fr);
 gap:12px;
 max-width:300px;
 margin:20px auto;
}

.seat{
 background:rgba(0,0,0,.6);
 padding:14px;
 border-radius:14px;
}

.you{
 border:2px solid crimson;
}

.empty{
 opacity:.5;
}
</style>

</body>
</html>
